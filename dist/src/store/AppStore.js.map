{"version":3,"sources":["../../../src/store/AppStore.js"],"names":["use","state","photos","videos","series","getters","restclient","create","baseURL","defaults","headers","common","localStorage","getItem","mutations","SYNC_PHOTOS","ADD_PHOTO","photo","push","SYNC_VIDEOS","ADD_VIDEO","video","SYNC_SERIES","ADD_SERIE","serie","actions","loadData","store","console","log","get","then","commit","response","body","data","addPhoto","post","id","error","addVideo","http","options","root","addSerie","Store"],"mappings":"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","file":"AppStore.js","sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\nimport axios from 'axios'\n\nVue.use(Vuex)\n\nconst state = {\n  photos: [],\n  videos: [],\n  series: []\n}\n\nconst getters = {\n  photos: state => state.photos,\n  videos: state => state.videos,\n  series: state => state.series\n}\n\nconst restclient = axios.create({\n  baseURL: 'http://localhost:8000/'\n  // timeout: 1000,\n})\n\nrestclient.defaults.headers.common['Authorization'] = localStorage.getItem('token')\n\nconst mutations = {\n  SYNC_PHOTOS: (state, photos) => {\n    state.photos = photos\n  },\n  ADD_PHOTO: (state, photo) => {\n    state.photos.push(photo)\n  },\n  SYNC_VIDEOS: (state, videos) => {\n    state.videos = videos\n  },\n  ADD_VIDEO: (state, video) => {\n    state.videos.push(video)\n  },\n  SYNC_SERIES: (state, series) => {\n    state.series = series\n  },\n  ADD_SERIE: (state, serie) => {\n    state.series.push(serie)\n  }\n}\nconst actions = {\n  // charge l'Ã©tat du store via l'API\n  loadData: (store) => {\n    console.log('load data')\n\n    // sync photos\n    restclient.get('photos')\n      .then(\n        response => {\n          store.commit('SYNC_PHOTOS', response.body.data)\n        },\n        response => {\n          console.log('error while syncing photos')\n        }\n      )\n    //\n    // // sync videos\n    // Vue.http.get('videos').then(\n    //   response => {\n    //     store.commit('SYNC_VIDEOS', response.body.data)\n    //   },\n    //   response => {\n    //     console.log('error while syncing videos')\n    //   },\n    // )\n    // // sync series\n    // Vue.http.get('series').then(\n    //   response => {\n    //     store.commit('SYNC_SERIES', response.body.data)\n    //   },\n    //   response => {\n    //     console.log('error while syncing series')\n    //   },\n    // )\n  },\n  addPhoto: (store, photo) => {\n    console.log('add photo action')\n\n    //  Appel API REST\n    restclient.post('photo/' + photo.id, {photo}).then(\n      //  success callback\n      response => {\n        //  commit via le mutateur\n        store.commit('ADD_PHOTO', response.body)\n      },\n      //  error callback\n      response => {\n        console.error('error while adding photo')\n      }\n    )\n  },\n  addVideo: (store, video) => {\n    Vue.http.options.root = 'http://localhost:8000'\n    //  Appel API REST\n    Vue.http.post('video/' + video.id, {video}).then(\n      //  success callback\n      response => {\n        //  commit via le mutateur\n        store.commit('ADD_VIDEO', response.body)\n      },\n      //  error callback\n      response => {\n        console.error('error while adding video')\n      }\n    )\n  },\n  addSerie: (store, serie) => {\n    Vue.http.options.root = 'http://localhost:8000'\n    //  Appel API REST\n    Vue.http.post('serie/' + serie.id, {serie}).then(\n      //  success callback\n      response => {\n        //  commit via le mutateur\n        store.commit('ADD_SERIE', response.body)\n      },\n      //  error callback\n      response => {\n        console.error('error while adding serie')\n      }\n    )\n  }\n}\n\nlet store = new Vuex.Store({\n  state: state,\n  mutations: mutations,\n  getters: getters,\n  actions: actions\n})\n\nexport default store\n\n"]}